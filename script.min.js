document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelectorAll(".main-groups h2");for(let n=0;n<e.length;n++)e[n].addEventListener("click",(function(){let e=this.closest(".main-groups");if(e.classList.contains("collapsed")){e.classList.remove("collapsed");let l=e.querySelectorAll("*:not(h2)");for(let e=0;e<l.length;e++)t(l[e],300)}else{e.classList.add("collapsed");let t=e.querySelectorAll("*:not(h2)");for(let e=0;e<t.length;e++)l(t[e],300)}}));function t(e,t){e.style.display="block",e.style.height="0",e.style.overflow="hidden";let l=e.scrollHeight;e.style.transition="height "+t+"ms",requestAnimationFrame((function(){e.style.height=l+"px",setTimeout((function(){e.style.height="",e.style.overflow="",e.style.transition=""}),t)}))}function l(e,t){e.style.height=e.scrollHeight+"px",e.style.overflow="hidden",e.style.transition="height "+t+"ms",requestAnimationFrame((function(){e.style.height="0",setTimeout((function(){e.style.display="none",e.style.height="",e.style.overflow="",e.style.transition=""}),t)}))}let n=document.querySelectorAll("input, select");for(let e=0;e<n.length;e++)n[e].addEventListener("focus",(function(){this.style.borderColor="var(--primary-blue)",this.style.boxShadow="0 0 5px rgba(28, 148, 233, .5)"})),n[e].addEventListener("blur",(function(){this.classList.contains("error")||(this.style.borderColor="#DDD",this.style.boxShadow="none")}));let o=document.querySelectorAll("button:not(.clear-button)");for(let e=0;e<o.length;e++)o[e].addEventListener("mouseenter",(function(){this.style.backgroundColor="var(--dark-blue)",this.style.transform="translateY(-2px)",this.style.boxShadow="0 4px 8px var(--shadow-color)"})),o[e].addEventListener("mouseleave",(function(){this.style.backgroundColor="var(--primary-blue)",this.style.transform="translateY(0)",this.style.boxShadow="0 2px 4px var(--shadow-color)"}));let s=document.querySelectorAll(".clear-button");for(let e=0;e<s.length;e++)s[e].addEventListener("click",(function(){let e=this.dataset.section,t=document.getElementById(e),l=t.querySelectorAll("input");for(let e=0;e<l.length;e++)l[e].value="",l[e].classList.remove("error");let n=t.querySelectorAll("select");for(let e=0;e<n.length;e++)n[e].selectedIndex=0;let o=t.querySelector(".result");o&&(o.innerHTML="",o.classList.remove("show"))}));fetch("/api/ptable",{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(e){if(!e.ok)throw new Error("HTTP error! status: "+e.status);return e.json()})).then((function(e){let t=96485,l=e;function n(e,t){let l=e.length,n=e[t],o=/[A-Z]/.test(n);if(t<l&&o){let o=n;if((t+=1)<l){let l=e[t];/[a-z]/.test(l)&&(o+=l,t+=1)}return[o,t]}throw new Error("Invalid element at position "+t)}function o(e,t){let l=0,n=e.length;for(;t<n;){let n=e[t];if(!/[0-9]/.test(n))break;l=10*l+parseInt(n),t+=1}return[l>0?l:1,t]}function s(e){let t,l={},n=/([A-Z][a-z]*)(\d*)/g,o=0;for(;null!==(t=n.exec(e));){let s=t[1],r=t[2]?parseInt(t[2]):1;if(l[s])throw new Error("Oops, "+s+" shows up twice in "+e);l[s]=r,o=n.lastIndex}if(o!==e.length)throw new Error("Bad formula: "+e);return l}function r(e){let t=document.getElementById("balance-result");t.innerHTML="Balancing...",t.classList.add("show");let l=function(e){let t=e.split("->"),l=[];for(let e=0;e<t.length;e++)l.push(t[e].trim());if(2!==l.length)throw new Error('Equation format is off, use "->" between sides');let n=l[0].split("+"),o=[];for(let e=0;e<n.length;e++)o.push(n[e].trim());let s=l[1].split("+"),r=[];for(let e=0;e<s.length;e++)r.push(s[e].trim());return{reactants:o,products:r}}(e),n=l.reactants,o=l.products,r=n.concat(o),a=[];for(let e=0;e<r.length;e++)a.push(s(r[e]));let i=[],d=new Set;for(let e=0;e<a.length;e++){let t=a[e],l=Object.keys(t);for(let e=0;e<l.length;e++)d.add(l[e])}function u(e,t){return 0==t?e:u(t,e%t)}function c(e,t){this.numerator=e,this.denominator=t,this.normalize()}i=Array.from(d),c.prototype.normalize=function(){this.denominator<0&&(this.numerator=-this.numerator,this.denominator=-this.denominator);let e=u(Math.abs(this.numerator),Math.abs(this.denominator));this.numerator=this.numerator/e,this.denominator=this.denominator/e},c.prototype.add=function(e){return new c(this.numerator*e.denominator+e.numerator*this.denominator,this.denominator*e.denominator)},c.prototype.sub=function(e){return new c(this.numerator*e.denominator-e.numerator*this.denominator,this.denominator*e.denominator)},c.prototype.mul=function(e){return new c(this.numerator*e.numerator,this.denominator*e.denominator)},c.prototype.div=function(e){return new c(this.numerator*e.denominator,this.denominator*e.numerator)};let m=r.length,p=i.length,f=[];for(let e=0;e<p;e++){let t=i[e],l=[];for(let e=0;e<m;e++){let o=e<n.length?1:-1,s=a[e][t]||0;l.push(o*s)}f.push(l)}let h=m-1,g=p,y=[];for(let e=0;e<g;e++){let t=[];for(let l=0;l<h;l++)t.push(new c(f[e][l],1));t.push(new c(-f[e][m-1],1)),y.push(t)}let b=0;for(let e=0;e<h&&b<g;e++){let t=b;for(;t<g&&0==y[t][e].numerator;)t+=1;if(t==g)continue;let l=y[b];y[b]=y[t],y[t]=l;let n=y[b][e],o=new c(n.denominator,n.numerator);for(let t=e;t<=h;t++)y[b][t]=y[b][t].mul(o);for(let t=0;t<g;t++)if(t!==b&&0!==y[t][e].numerator){let l=y[t][e];for(let n=e;n<=h;n++)y[t][n]=y[t][n].sub(l.mul(y[b][n]))}b+=1}let E=new Array(m);for(let e=0;e<h;e++){let t=new c(0,1);for(let l=0;l<g;l++)if(1==y[l][e].numerator&&1==y[l][e].denominator){t=y[l][h];break}E[e]=t}E[m-1]=new c(1,1);let L=[];for(let e=0;e<E.length;e++)L.push(E[e].denominator);let v=L[0];for(let e=1;e<L.length;e++)I=v,w=L[e],v=I/u(I,w)*w;var I,w;let B=[];for(let e=0;e<E.length;e++){let t=E[e],l=t.numerator*(v/t.denominator);B.push(Math.round(l))}let M=!1;for(let e=0;e<B.length;e++)if(B[e]<0){M=!0;break}if(M)for(let e=0;e<B.length;e++)B[e]=-B[e];let T=B[0];for(let e=1;e<B.length;e++)T=u(T,B[e]);for(let e=0;e<B.length;e++)B[e]=B[e]/T;let V=!1;for(let e=0;e<B.length;e++)if(Math.abs(B[e])>1250){V=!0;break}if(V)throw new Error("No solution found with coefficients up to 1250");let F="";for(let e=0;e<n.length;e++){let t=B[e];F=F+(e>0?" + ":"")+(1==t?n[e]:t+n[e])}let P="";for(let e=0;e<o.length;e++){let t=B[e+n.length];P=P+(e>0?" + ":"")+(1==t?o[e]:t+o[e])}return F+" -> "+P}function a(e){let t=e.replace(/\s+/g,"").split("->");if(2!==t.length)throw new Error('Invalid equation format: missing "->"');let l=t[0].split("+"),n=t[1].split("+"),o=[],s=[];for(let e=0;e<l.length;e++)o.push(i(l[e]));for(let e=0;e<n.length;e++)s.push(i(n[e]));return{reactants:o,products:s}}function i(e){let t=e.match(/^(\d+)?(.+)$/);if(!t)throw new Error("Invalid term: "+e);let l=t[1]?parseInt(t[1]):1;return{formula:t[2],coefficient:l}}function d(e,t){for(let l=0;l<e.length;l++)if(isNaN(e[l])){if(t&&t[l]){document.getElementById(t[l]).classList.add("error")}throw new Error("Please fill all required fields with valid numbers")}}document.getElementById("element-input").addEventListener("keyup",(function(){let e=document.getElementById("element-input"),t=e.value.trim().toLowerCase();e.classList.remove("error");let n=null;for(let e=0;e<l.length;e++){let o=l[e];if(o.symbol.toLowerCase()==t||o.name.toLowerCase()==t){n=o;break}}let o=document.getElementById("element-info");if(null!==n){let e="<p><strong>Symbol:</strong> "+n.symbol+"</p><p><strong>Name:</strong> "+n.name+"</p><p><strong>Atomic Mass:</strong> "+n.atomicMass+" u</p><p><strong>Atomic Number:</strong> "+n.atomicNumber+"</p><p><strong>Electronegativity:</strong> "+(null!==n.electronegativity?n.electronegativity:"N/A")+"</p><p><strong>Electron Affinity:</strong> "+(null!==n.electronAffinity?n.electronAffinity:"N/A")+" kJ/mol</p><p><strong>Atomic Radius:</strong> "+(null!==n.atomicRadius?n.atomicRadius:"N/A")+" pm</p><p><strong>Ionization Energy:</strong> "+(null!==n.ionizationEnergy?n.ionizationEnergy:"N/A")+" kJ/mol</p><p><strong>Valence Electrons:</strong> "+n.valenceElectrons+"</p><p><strong>Total Electrons:</strong> "+n.totalElectrons+"</p><p><strong>Group:</strong> "+n.group+"</p><p><strong>Period:</strong> "+n.period+"</p><p><strong>Type:</strong> "+n.type+"</p>";o.innerHTML=e,o.classList.add("show")}else o.innerHTML="<p>Element not found</p>",o.classList.add("show"),e.classList.add("error")})),document.getElementById("formula-input").addEventListener("keyup",(function(){let e=document.getElementById("formula-input"),t=e.value.trim();e.classList.remove("error");let s=document.getElementById("mass-result");if(""==t)return s.innerHTML="<p>Please enter a chemical formula</p>",s.classList.add("show"),void e.classList.add("error");try{let e=function(e,t){let l=[0],s=0,r=e.length;for(;s<r;){let r=e[s];if(/[A-Z]/.test(r)){let r=n(e,s),a=r[0];s=r[1];let i=o(e,s),d=i[0];s=i[1];let u=null;for(let e=0;e<t.length;e++)if(t[e].symbol==a){u=t[e];break}if(null===u)throw new Error("Element not found: "+a);{let e=l.length-1;l[e]=l[e]+u.atomicMass*d}}else if("("==r)l.push(0),s+=1;else{if(")"!=r)throw new Error("Invalid character: "+r);{if(l.length<2)throw new Error('Unmatched ")"');let t=l.pop(),n=o(e,s+1),r=n[0];s=n[1];let a=l.length-1;l[a]=l[a]+t*r}}}if(l.length>1)throw new Error('Unmatched "("');return l[0]}(t,l);s.innerHTML="<p>Molar Mass: "+e.toFixed(2)+" g/mol</p>",s.classList.add("show")}catch(t){s.innerHTML="<p>"+t.message+"</p>",s.classList.add("show"),e.classList.add("error")}})),document.getElementById("balance-button").addEventListener("click",(function(){let e=document.getElementById("equation-input"),t=e.value.trim();e.classList.remove("error");let l=document.getElementById("balance-result");if(""==t)return l.innerHTML="<p>Please enter a chemical equation</p>",l.classList.add("show"),void e.classList.add("error");try{let e=r(t);l.innerHTML="<p>Balanced Equation: "+e+"</p>",l.classList.add("show")}catch(t){l.innerHTML="<p>"+t.message+"</p>",l.classList.add("show"),e.classList.add("error")}})),document.getElementById("calculation-type").addEventListener("change",(function(){let e=document.getElementById("calculation-type").value,t=document.getElementById("stoich-equation-input"),l=t.value.trim(),n=document.getElementById("stoich-inputs");if(""==l)return n.innerHTML="<p>Please enter a balanced chemical equation.</p>",n.classList.add("show"),void t.classList.add("error");try{let o=a(l);if(t.classList.remove("error"),n.innerHTML="","product-from-reactant"==e){let e="";for(let t=0;t<o.reactants.length;t++){let l=o.reactants[t];e=e+'<option value="'+l.formula+'">'+l.formula+"</option>"}let t='<select id="reactant-select">'+e+"</select>",l='<input type="number" id="reactant-moles" placeholder="Moles of reactant" min="0" step="any">',s="";for(let e=0;e<o.products.length;e++){let t=o.products[e];s=s+'<option value="'+t.formula+'">'+t.formula+"</option>"}let r='<select id="product-select">'+s+"</select>";n.innerHTML="<p>Select reactant: "+t+"</p><p>Enter moles: "+l+"</p><p>Select product: "+r+"</p>",n.classList.add("show")}else if("reactant-from-product"==e){let e="";for(let t=0;t<o.products.length;t++){let l=o.products[t];e=e+'<option value="'+l.formula+'">'+l.formula+"</option>"}let t='<select id="product-select">'+e+"</select>",l='<input type="number" id="product-moles" placeholder="Moles of product" min="0" step="any">',s="";for(let e=0;e<o.reactants.length;e++){let t=o.reactants[e];s=s+'<option value="'+t.formula+'">'+t.formula+"</option>"}let r='<select id="reactant-select">'+s+"</select>";n.innerHTML="<p>Select product: "+t+"</p><p>Enter moles: "+l+"</p><p>Select reactant: "+r+"</p>",n.classList.add("show")}else if("limiting-reactant"==e){let e="";for(let t=0;t<o.reactants.length;t++){let l=o.reactants[t];e=e+"<p>"+l.formula+': <input type="number" id="moles-'+l.formula+'" placeholder="Moles of '+l.formula+'" min="0" step="any"></p>'}let t="";for(let e=0;e<o.products.length;e++){let l=o.products[e];t=t+'<option value="'+l.formula+'">'+l.formula+"</option>"}let l='<select id="product-select">'+t+"</select>";n.innerHTML=e+"<p>Select product to calculate: "+l+"</p>",n.classList.add("show")}}catch(e){n.innerHTML="<p>Error parsing equation: "+e.message+"</p>",n.classList.add("show"),t.classList.add("error")}})),document.getElementById("calculate-stoich-button").addEventListener("click",(function(){let e=document.getElementById("calculation-type").value,t=document.getElementById("stoich-equation-input"),l=t.value.trim(),n=document.getElementById("stoich-result");if(t.classList.remove("error"),""==l)return n.innerHTML="<p>Please enter a balanced chemical equation.</p>",n.classList.add("show"),void t.classList.add("error");try{let o=a(l);if(t.classList.remove("error"),"product-from-reactant"==e){let e=document.getElementById("reactant-select").value,t=document.getElementById("reactant-moles"),l=parseFloat(t.value),s=document.getElementById("product-select").value;if(!(!isNaN(l)&&l>0))throw t.classList.add("error"),new Error("Invalid moles input");t.classList.remove("error");let r=null;for(let t=0;t<o.reactants.length;t++)if(o.reactants[t].formula==e){r=o.reactants[t];break}let a=null;for(let e=0;e<o.products.length;e++)if(o.products[e].formula==s){a=o.products[e];break}if(null==r||null==a)throw new Error("Selected compound not found");let i=l/r.coefficient*a.coefficient;n.innerHTML="<p>Moles of "+s+": "+i.toFixed(2)+"</p>",n.classList.add("show")}else if("reactant-from-product"==e){let e=document.getElementById("product-select").value,t=document.getElementById("product-moles"),l=parseFloat(t.value),s=document.getElementById("reactant-select").value;if(!(!isNaN(l)&&l>0))throw t.classList.add("error"),new Error("Invalid moles input");t.classList.remove("error");let r=null;for(let t=0;t<o.products.length;t++)if(o.products[t].formula==e){r=o.products[t];break}let a=null;for(let e=0;e<o.reactants.length;e++)if(o.reactants[e].formula==s){a=o.reactants[e];break}if(null==r||null==a)throw new Error("Selected compound not found");let i=l/r.coefficient*a.coefficient;n.innerHTML="<p>Moles of "+s+": "+i.toFixed(2)+"</p>",n.classList.add("show")}else if("limiting-reactant"==e){let e={};for(let t=0;t<o.reactants.length;t++){let l=o.reactants[t],n=document.getElementById("moles-"+l.formula),s=parseFloat(n.value);if(!(!isNaN(s)&&s>0))throw n.classList.add("error"),new Error("Invalid moles for "+l.formula);n.classList.remove("error"),e[l.formula]=s}let t=document.getElementById("product-select").value,l=null;for(let e=0;e<o.products.length;e++)if(o.products[e].formula==t){l=o.products[e];break}if(null==l)throw new Error("Selected product not found");let s=1/0,r=null;for(let t=0;t<o.reactants.length;t++){let l=o.reactants[t],n=e[l.formula]/l.coefficient;n<s&&(s=n,r=l.formula)}let a=s*l.coefficient;n.innerHTML="<p>Limiting reactant: "+r+"</p><p>Moles of "+t+": "+a.toFixed(2)+"</p>",n.classList.add("show")}}catch(e){n.innerHTML="<p>Error: "+e.message+"</p>",n.classList.add("show"),t.classList.add("error")}})),document.getElementById("calculate-dilution").addEventListener("click",(function(){try{let e,t,l=document.getElementById("dilution-solve-for").value,n=parseFloat(document.getElementById("dilution-M1").value),o=parseFloat(document.getElementById("dilution-V1").value),s=parseFloat(document.getElementById("dilution-M2").value),r=parseFloat(document.getElementById("dilution-V2").value),a=document.querySelectorAll("#dilution-calc input");for(let e=0;e<a.length;e++)a[e].classList.remove("error");if("M1"==l)d([o,s,r],["dilution-V1","dilution-M2","dilution-V2"]),e=s*r/o,t="M<sub>1</sub>=(M<sub>2</sub> x V<sub>2</sub>)/V<sub>1</sub>";else if("V1"==l)d([n,s,r],["dilution-M1","dilution-M2","dilution-V2"]),e=s*r/n,t="V<sub>1</sub>=(M<sub>2</sub> x V<sub>2</sub>)/M<sub>1</sub>";else if("M2"==l)d([n,o,r],["dilution-M1","dilution-V1","dilution-V2"]),e=n*o/r,t="M<sub>2</sub>=(M<sub>1</sub> x V<sub>1</sub>)/V<sub>2</sub>";else{if("V2"!=l)throw new Error("Invalid calculation type");d([n,o,s],["dilution-M1","dilution-V1","dilution-M2"]),e=n*o/s,t="V<sub>2</sub>=(M<sub>1</sub> x V<sub>1</sub>)/M<sub>2</sub>"}let i=l.startsWith("M")?"M":"L",u=document.getElementById("dilution-result");u.innerHTML="<p>"+t+"</p><p>Result: "+e.toFixed(4)+" "+i+"</p>",u.classList.add("show")}catch(e){let t=document.getElementById("dilution-result");t.innerHTML="<p>Error: "+e.message+"</p>",t.classList.add("show")}})),document.getElementById("calculate-mass-percent").addEventListener("click",(function(){try{let e=parseFloat(document.getElementById("mass-solute").value),t=parseFloat(document.getElementById("mass-solution").value),l=document.getElementById("concentration-unit").value,n=document.querySelectorAll("#mass-percent-calc input");for(let e=0;e<n.length;e++)n[e].classList.remove("error");if(d([e,t],["mass-solute","mass-solution"]),0==t)throw new Error("Solution mass cannot be zero");let o,s,r=e/t;if("percent"==l)o=100*r,s="%";else if("ppm"==l)o=1e6*r,s="ppm";else{if("ppb"!=l)throw new Error("Invalid unit");o=1e9*r,s="ppb"}let a=document.getElementById("mass-percent-result");a.innerHTML="<p>Concentration: "+o.toFixed(4)+" "+s+"</p>",a.classList.add("show")}catch(e){let t=document.getElementById("mass-percent-result");t.innerHTML="<p>Error: "+e.message+"</p>",t.classList.add("show")}})),document.getElementById("calculate-mixing").addEventListener("click",(function(){try{let e=parseFloat(document.getElementById("mix-C1").value),t=parseFloat(document.getElementById("mix-V1").value),l=parseFloat(document.getElementById("mix-C2").value),n=parseFloat(document.getElementById("mix-V2").value),o=document.querySelectorAll("#solution-mixing-calc input");for(let e=0;e<o.length;e++)o[e].classList.remove("error");if(d([e,t,l,n],["mix-C1","mix-V1","mix-C2","mix-V2"]),t+n==0)throw new Error("Total volume cannot be zero");let s=t+n,r=(e*t+l*n)/s,a=document.getElementById("mixing-result");a.innerHTML="<p>Final Concentration: "+r.toFixed(4)+" M</p><p>Total Volume: "+s.toFixed(4)+" L</p>",a.classList.add("show")}catch(e){let t=document.getElementById("mixing-result");t.innerHTML="<p>Error: "+e.message+"</p>",t.classList.add("show")}})),document.getElementById("calculate-ideal").addEventListener("click",(function(){try{let e,t,l,n=document.getElementById("ideal-solve-for").value,o=document.getElementById("ideal-R-units").value,s="atm-L"==o?.08206:8.314,r=parseFloat(document.getElementById("ideal-P").value),a=parseFloat(document.getElementById("ideal-V").value),i=parseFloat(document.getElementById("ideal-n").value),u=parseFloat(document.getElementById("ideal-T").value),c=document.querySelectorAll("#ideal-gas-law input");for(let e=0;e<c.length;e++)c[e].classList.remove("error");"P"==n?(d([a,i,u],["ideal-V","ideal-n","ideal-T"]),e=i*s*u/a,t="P=(nRT)/V"):"V"==n?(d([r,i,u],["ideal-P","ideal-n","ideal-T"]),e=i*s*u/r,t="V=(nRT)/P"):"n"==n?(d([r,a,u],["ideal-P","ideal-V","ideal-T"]),e=r*a/(s*u),t="n=(PV)/(RT)"):"T"==n&&(d([r,a,i],["ideal-P","ideal-V","ideal-n"]),e=r*a/(i*s),t="T=(PV)/(nR)"),l="P"==n?"atm-L"==o?"atm":"Pa":"V"==n?"atm-L"==o?"L":"m³":"n"==n?"mol":"K";let m=document.getElementById("ideal-result");m.innerHTML="<p>"+t+"</p><p>Result: "+e.toFixed(4)+" "+l+"</p>",m.classList.add("show")}catch(e){let t=document.getElementById("ideal-result");t.innerHTML="<p>Error: "+e.message+"</p>",t.classList.add("show")}})),document.getElementById("calculate-combined").addEventListener("click",(function(){try{let e,t,l,n=document.getElementById("combined-solve-for").value,o=parseFloat(document.getElementById("combined-P1").value),s=parseFloat(document.getElementById("combined-V1").value),r=parseFloat(document.getElementById("combined-T1").value),a=parseFloat(document.getElementById("combined-P2").value),i=parseFloat(document.getElementById("combined-V2").value),u=parseFloat(document.getElementById("combined-T2").value),c=document.querySelectorAll("#combined-gas-law input");for(let e=0;e<c.length;e++)c[e].classList.remove("error");"P1"==n?(d([s,r,a,i,u],["combined-V1","combined-T1","combined-P2","combined-V2","combined-T2"]),e=a*i*r/(s*u),t="P<sub>1</sub>=(P<sub>2</sub> V<sub>2</sub> T<sub>1</sub>)/(V<sub>1</sub> T<sub>2</sub>)"):"V1"==n?(d([o,r,a,i,u],["combined-P1","combined-T1","combined-P2","combined-V2","combined-T2"]),e=a*i*r/(o*u),t="V<sub>1</sub>=(P<sub>2</sub> V<sub>2</sub> T<sub>1</sub>)/(P<sub>1</sub> T<sub>2</sub>)"):"T1"==n?(d([o,s,a,i,u],["combined-P1","combined-V1","combined-P2","combined-V2","combined-T2"]),e=o*s*u/(a*i),t="T<sub>1</sub>=(P<sub>1</sub> V<sub>1</sub> T<sub>2</sub>)/(P<sub>2</sub> V<sub>2</sub>)"):"P2"==n?(d([o,s,r,i,u],["combined-P1","combined-V1","combined-T1","combined-V2","combined-T2"]),e=o*s*u/(i*r),t="P<sub>2</sub>=(P<sub>1</sub> V<sub>1</sub> T<sub>2</sub>)/(V<sub>2</sub> T<sub>1</sub>)"):"V2"==n?(d([o,s,r,a,u],["combined-P1","combined-V1","combined-T1","combined-P2","combined-T2"]),e=o*s*u/(a*r),t="V<sub>2</sub>=(P<sub>1</sub> V<sub>1</sub> T<sub>2</sub>)/(P<sub>2</sub> T<sub>1</sub>)"):"T2"==n&&(d([o,s,r,a,i],["combined-P1","combined-V1","combined-T1","combined-P2","combined-V2"]),e=a*i*r/(o*s),t="T<sub>2</sub>=(P<sub>2</sub> V<sub>2</sub> T<sub>1</sub>)/(P<sub>1</sub> V<sub>1</sub>)"),l=n.includes("P")?"pressure units":n.includes("V")?"volume units":n.includes("T")?"K":"";let m=document.getElementById("combined-result");m.innerHTML="<p>"+t+"</p><p>Result: "+e.toFixed(4)+" "+l+"</p>",m.classList.add("show")}catch(e){let t=document.getElementById("combined-result");t.innerHTML="<p>Error: "+e.message+"</p>",t.classList.add("show")}})),document.getElementById("calculate-vdw").addEventListener("click",(function(){try{let e=parseFloat(document.getElementById("vdw-V").value),t=parseFloat(document.getElementById("vdw-n").value),l=parseFloat(document.getElementById("vdw-T").value),n=parseFloat(document.getElementById("vdw-a").value),o=parseFloat(document.getElementById("vdw-b").value),s=document.querySelectorAll("#van-der-waals input");for(let e=0;e<s.length;e++)s[e].classList.remove("error");d([e,t,l,n,o],["vdw-V","vdw-n","vdw-T","vdw-a","vdw-b"]);let r=t*.08206*l/(e-t*o)-n*Math.pow(t/e,2),a=document.getElementById("vdw-result");a.innerHTML="<p>P="+r.toFixed(4)+" atm</p>",a.classList.add("show")}catch(e){let t=document.getElementById("vdw-result");t.innerHTML="<p>Error: "+e.message+"</p>",t.classList.add("show")}})),document.getElementById("ideal-R-units").addEventListener("change",(function(){let e=this.value;"atm-L"==e?(document.getElementById("ideal-P").setAttribute("placeholder","P (atm)"),document.getElementById("ideal-V").setAttribute("placeholder","V (L)")):"SI"==e&&(document.getElementById("ideal-P").setAttribute("placeholder","P (Pa)"),document.getElementById("ideal-V").setAttribute("placeholder","V (m³)"))})),document.getElementById("calculate-half-life").addEventListener("click",(function(){try{let e,t=document.getElementById("half-life-solve-for").value,l=parseFloat(document.getElementById("initial-quantity").value),n=parseFloat(document.getElementById("time-input").value),o=parseFloat(document.getElementById("half-life-input").value),s=parseFloat(document.getElementById("remaining-quantity").value),r=document.querySelectorAll("#half-life-calc input");for(let e=0;e<r.length;e++)r[e].classList.remove("error");if("remaining"==t){d([l,n,o],["initial-quantity","time-input","half-life-input"]),e=l*Math.pow(.5,n/o);let t=document.getElementById("half-life-result");t.innerHTML="<p>Remaining: "+e.toFixed(4)+" (after "+n+" units)</p>",t.classList.add("show")}else if("time"==t){d([l,o,s],["initial-quantity","half-life-input","remaining-quantity"]),e=Math.log(s/l)/Math.log(.5)*o;let t=document.getElementById("half-life-result");t.innerHTML="<p>Time needed: "+e.toFixed(4)+" units</p>",t.classList.add("show")}else if("half-life"==t){d([l,n,s],["initial-quantity","time-input","remaining-quantity"]),e=n/(Math.log(s/l)/Math.log(.5));let t=document.getElementById("half-life-result");t.innerHTML="<p>Half-life: "+e.toFixed(4)+" units</p>",t.classList.add("show")}}catch(e){let t=document.getElementById("half-life-result");t.innerHTML="<p>Error: "+e.message+"</p>",t.classList.add("show")}})),document.getElementById("half-life-solve-for").addEventListener("change",(function(){let e=this.value,t="time"==e||"half-life"==e?"block":"none";document.getElementById("remaining-quantity-group").style.display=t})),document.getElementById("calculate-cell-potential").addEventListener("click",(function(){let e=parseFloat(document.getElementById("E1").value),t=parseFloat(document.getElementById("E2").value),l=document.querySelectorAll("#cell-potential input");for(let e=0;e<l.length;e++)l[e].classList.remove("error");let n=document.getElementById("cell-potential-result");if(isNaN(e)||isNaN(t))return n.innerHTML="<p>Please enter valid numbers for both potentials.</p>",n.classList.add("show"),document.getElementById("E1").classList.add("error"),void document.getElementById("E2").classList.add("error");let o=Math.max(e,t),s=Math.min(e,t),r="<p>The half-reaction with E°="+o+" V is the cathode, and the one with E°="+s+" V is the anode.</p><p>The standard cell potential E°_cell="+(o-s).toFixed(3)+" V</p>";n.innerHTML=r,n.classList.add("show")})),document.getElementById("calculate-nernst").addEventListener("click",(function(){let e=parseFloat(document.getElementById("E-standard").value),l=parseFloat(document.getElementById("temperature").value),n=parseFloat(document.getElementById("n-electrons").value),o=parseFloat(document.getElementById("Q-reaction").value),s=document.querySelectorAll("#nernst-equation input");for(let e=0;e<s.length;e++)s[e].classList.remove("error");let r=document.getElementById("nernst-result");if(isNaN(e)||isNaN(l)||isNaN(n)||isNaN(o)||l<=0||n<=0||o<=0){r.innerHTML="<p>Please enter valid positive numbers for all fields.</p>",r.classList.add("show");for(let e=0;e<s.length;e++)s[e].classList.add("error");return}let a=e-8.314*l/(n*t)*Math.log(o);r.innerHTML="<p>The cell potential E="+a.toFixed(3)+" V</p>",r.classList.add("show")})),document.getElementById("calculate-electrolysis").addEventListener("click",(function(){let e=document.getElementById("electrolysis-solve-for").value,l=parseFloat(document.getElementById("electrolysis-m").value),n=parseFloat(document.getElementById("electrolysis-I").value),o=parseFloat(document.getElementById("electrolysis-t").value),s=parseFloat(document.getElementById("electrolysis-z").value),r=parseFloat(document.getElementById("electrolysis-M").value),a=document.querySelectorAll("#electrolysis input");for(let e=0;e<a.length;e++)a[e].classList.remove("error");let i=document.getElementById("electrolysis-result");if("mass"==e){if(isNaN(n)||isNaN(o)||isNaN(s)||isNaN(r)||n<=0||o<=0||s<=0||r<=0)return i.innerHTML="<p>Please enter valid positive numbers for I, t, z, and M.</p>",i.classList.add("show"),document.getElementById("electrolysis-I").classList.add("error"),document.getElementById("electrolysis-t").classList.add("error"),document.getElementById("electrolysis-z").classList.add("error"),void document.getElementById("electrolysis-M").classList.add("error");let e=n*o/(t*s)*r;i.innerHTML="<p>The mass deposited m="+e.toFixed(3)+" g</p>",i.classList.add("show")}else if("current"==e){if(isNaN(l)||isNaN(o)||isNaN(s)||isNaN(r)||l<=0||o<=0||s<=0||r<=0)return i.innerHTML="<p>Please enter valid positive numbers for m, t, z, and M.</p>",i.classList.add("show"),document.getElementById("electrolysis-m").classList.add("error"),document.getElementById("electrolysis-t").classList.add("error"),document.getElementById("electrolysis-z").classList.add("error"),void document.getElementById("electrolysis-M").classList.add("error");let e=l/r*t*s/o;i.innerHTML="<p>The current I="+e.toFixed(3)+" A</p>",i.classList.add("show")}else if("time"==e){if(isNaN(l)||isNaN(n)||isNaN(s)||isNaN(r)||l<=0||n<=0||s<=0||r<=0)return i.innerHTML="<p>Please enter valid positive numbers for m, I, z, and M.</p>",i.classList.add("show"),document.getElementById("electrolysis-m").classList.add("error"),document.getElementById("electrolysis-I").classList.add("error"),document.getElementById("electrolysis-z").classList.add("error"),void document.getElementById("electrolysis-M").classList.add("error");let e=l/r*t*s/n;i.innerHTML="<p>The time t="+e.toFixed(3)+" s</p>",i.classList.add("show")}})),document.getElementById("calculate-bond-type").addEventListener("click",(function(){try{let e=document.getElementById("element1-input"),t=document.getElementById("element2-input"),n=document.getElementById("bond-type-result");e.classList.remove("error"),t.classList.remove("error"),n.classList.remove("show");let o=e.value.trim(),s=t.value.trim();if(!o||!s)throw e.classList.add("error"),t.classList.add("error"),new Error("Please enter both element symbols");o=o.charAt(0).toUpperCase()+o.slice(1).toLowerCase(),s=s.charAt(0).toUpperCase()+s.slice(1).toLowerCase();let r=null,a=null;for(let e=0;e<l.length;e++){let t=l[e];if(t.symbol==o&&(r=t),t.symbol==s&&(a=t),null!==r&&null!==a)break}if(!r||!a)throw e.classList.add("error"),t.classList.add("error"),new Error("One or both elements not found in periodic table");let i=r.electronegativity,d=a.electronegativity;if(null==i||null==d||null==i||null==d)return n.innerHTML="<p>Bond prediction not possible due to unavailable electronegativity data</p>",void n.classList.add("show");let u,c=Math.abs(i-d).toFixed(2),m=r.type.toLowerCase(),p=a.type.toLowerCase(),f="lanthanide"==m||"actinide"==m||-1!==m.indexOf("metal")&&"metalloid"!==m&&"non-metal"!==m,h="lanthanide"==p||"actinide"==p||-1!==p.indexOf("metal")&&"metalloid"!==p&&"non-metal"!==p;u=f&&h?"Metallic":f!==h||c>=1.7?"Ionic":c>=.4?"Polar Covalent":"Nonpolar Covalent";let g="<p>"+r.symbol+" ("+i+") and "+a.symbol+" ("+d+") -> ΔEN="+c+" -> "+u+" bond</p>";n.innerHTML=g,n.classList.add("show")}catch(e){let t=document.getElementById("bond-type-result");t.innerHTML="<p>Error: "+e.message+"</p>",t.classList.add("show"),document.getElementById("element1-input").classList.add("error"),document.getElementById("element2-input").classList.add("error")}}))})).catch((function(e){console.error("Error fetching data:",e);let t=document.getElementById("element-info");t.innerHTML="<p>Error loading element data table</p>",t.classList.add("show")}))}));